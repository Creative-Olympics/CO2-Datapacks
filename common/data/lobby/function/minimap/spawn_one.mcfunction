$summon minecraft:glow_item_frame $(x) $(y) $(z) {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":79}},Fixed:1b,Tags:["lobby.minimap","lobby.minimap.new"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^1 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":80}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^2 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":81}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^3 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":82}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^4 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":83}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^5 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":84}},Fixed:1b,Tags:["lobby.minimap"]}

$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^ ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":78}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^1 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":77}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^2 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":76}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^3 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":75}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^4 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":74}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^5 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":73}},Fixed:1b,Tags:["lobby.minimap"]}

$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^ ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":67}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^1 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":68}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^2 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":69}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^3 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":70}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^4 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":71}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^5 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":72}},Fixed:1b,Tags:["lobby.minimap"]}

$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^ ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":66}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^1 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":65}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^2 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":64}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^3 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":63}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^4 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":62}},Fixed:1b,Tags:["lobby.minimap"]}
$execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon minecraft:glow_item_frame ^5 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",count:1b,components:{"minecraft:map_id":61}},Fixed:1b,Tags:["lobby.minimap"]}


# Mini market
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^0.69 ^1.82 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.mini_market"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^0.69 ^1.62 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.mini_market"]}

# Creepy Park
# execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^0.92 ^1.12 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.creepy_park"]}

# Amphitheater
# execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^1.31 ^1.62 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.amphitheater"]}

# Big Market
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^2.1 ^0.85 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.big_market"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^2.4 ^0.85 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.big_market"]}

# Gladiator place
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^4.17 ^0.28 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.gladiator_place"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^3.75 ^0.28 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.gladiator_place"]}

# Port
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^2.55 ^2.3 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.port"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^2.55 ^2.8 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.port"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^3.05 ^2.3 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.port"]}
execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run summon interaction ^3.05 ^2.8 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.minimap","lobby.minimap.port"]}


execute as @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] at @s run function #bs.position:get_pos {scale:1000}
scoreboard players operation @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] bs.pos.x /= 128 const
scoreboard players operation @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] bs.pos.z /= -128 const
execute store result storage bs:ctx x float 0.001 run scoreboard players add @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] bs.pos.x 3000
execute store result storage bs:ctx y float 0.001 run scoreboard players add @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] bs.pos.z 2000
execute as @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] at @s run function lobby:minimap/spawn_current_location with storage bs:ctx

execute at @e[type=minecraft:glow_item_frame,tag=lobby.minimap.new,limit=1] run fill ^ ^ ^ ^5 ^3 ^ light
tag @e[tag=lobby.minimap.new] remove lobby.minimap.new
