$summon minecraft:glow_item_frame $(x) $(y) $(z) {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:79}},Fixed:0b,Tags:["lobby.map","lobby.map.origin","lobby.map.origin.new"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^1 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:80}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^2 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:81}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^3 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:82}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^4 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:83}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^5 ^ ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:84}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}

$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^ ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:78}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^1 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:77}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^2 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:76}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^3 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:75}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^4 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:74}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^5 ^1 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:73}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}

$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^ ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:67}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^1 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:68}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^2 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:69}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^3 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:70}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^4 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:71}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^5 ^2 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:72}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}

$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^ ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:66}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^1 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:65}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^2 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:64}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^3 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:63}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^4 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:62}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}
$execute at @e[tag=lobby.map.origin.new] run summon minecraft:glow_item_frame ^5 ^3 ^ {Facing:$(facing)b,Invulnerable:1b,Item:{id:"filled_map",Count:1b,tag:{map:61}},Fixed:1b,Tags:["lobby.map","lobby.map.display"]}

# Mini market
execute at @e[tag=lobby.map.origin.new] run summon interaction ^0.69 ^1.82 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.mini_market"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^0.69 ^1.62 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.mini_market"]}

# Creepy Park
# execute at @e[tag=lobby.map.origin.new] run summon interaction ^0.92 ^1.12 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.creepy_park"]}

# Amphitheater
# execute at @e[tag=lobby.map.origin.new] run summon interaction ^1.31 ^1.62 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.amphitheater"]}

# Big Market
execute at @e[tag=lobby.map.origin.new] run summon interaction ^2.1 ^0.85 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.big_market"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^2.4 ^0.85 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.big_market"]}

# Gladiator place
execute at @e[tag=lobby.map.origin.new] run summon interaction ^4.17 ^0.28 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.gladiator_place"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^3.75 ^0.28 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.gladiator_place"]}

# Port
execute at @e[tag=lobby.map.origin.new] run summon interaction ^2.55 ^2.3 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.port"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^2.55 ^2.8 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.port"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^3.05 ^2.3 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.port"]}
execute at @e[tag=lobby.map.origin.new] run summon interaction ^3.05 ^2.8 ^ {Glowing:1b,width:0.5f,height:0.5f,response:1b,Tags:["lobby.map","lobby.map.interaction","lobby.map.goto.port"]}

execute as @e[tag=lobby.map.origin.new] at @s run function bs.position:get_pos/all {scale:1000}
execute as @e[tag=lobby.map.origin.new] run scoreboard players set 783 const 783
execute as @e[tag=lobby.map.origin.new] run scoreboard players operation @s bs.pos.x *= 783 const
execute as @e[tag=lobby.map.origin.new] run scoreboard players operation @s bs.pos.z *= 783 const
execute as @e[tag=lobby.map.origin.new] run scoreboard players operation @s bs.pos.z *= -1 const
execute as @e[tag=lobby.map.origin.new] run scoreboard players operation @s bs.pos.x /= 100000 const
execute as @e[tag=lobby.map.origin.new] run scoreboard players operation @s bs.pos.z /= 100000 const
execute as @e[tag=lobby.map.origin.new] run execute store result storage lobby:maps current_loc.x float 0.001 run scoreboard players add @s bs.pos.x 3000
execute as @e[tag=lobby.map.origin.new] run execute store result storage lobby:maps current_loc.y float 0.001 run scoreboard players add @s bs.pos.z 2000
execute as @e[tag=lobby.map.origin.new] at @s run function lobby:maps/summon/current_loc_marker with storage lobby:maps current_loc

execute as @e[tag=lobby.map.origin.new] at @s run fill ^ ^ ^ ^5 ^3 ^ light

tag @e[tag=lobby.map.origin.new] remove lobby.map.origin.new